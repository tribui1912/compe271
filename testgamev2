#include <stdio.h>
#include <stdlib.h>
#include <time.h>

#define WIDTH 10
#define HEIGHT 5
#define EMPTY '.'
#define PLAYER 'P'
#define ENEMY 'E'
#define LEFT -1
#define RIGHT 1

void display_map(char map[][WIDTH]);
void move_player(int *player_position, int direction);

int main() {
    srand(time(NULL));
    char map[HEIGHT][WIDTH];
    int player_position = WIDTH / 2;
    int enemy_count = rand() % (WIDTH - 1) + 1;

    // Initialize the map
    for (int i = 0; i < HEIGHT; i++) {
        for (int j = 0; j < WIDTH; j++) {
            if (i == HEIGHT - 1 && j == player_position) {
                map[i][j] = PLAYER;
            } else {
                map[i][j] = EMPTY;
            }
        }
    }

    // Generate enemies
    for (int i = 0; i < enemy_count; i++) {
        int x = rand() % WIDTH;
        int y = rand() % (HEIGHT - 1);
        map[y][x] = ENEMY;
    }

    // Game loop
    while (1) {
        display_map(map);

        // Player input
        char input;
        printf("Enter 'a' to move left, 'd' to move right, or 'q' to quit: ");
        scanf(" %c", &input);

        if (input == 'q') {
            break;
        } else if (input == 'a') {
            move_player(&player_position, LEFT);
        } else if (input == 'd') {
            move_player(&player_position, RIGHT);
        }

        // Update map
        map[HEIGHT - 1][player_position] = PLAYER;
    }

    return 0;
}

void display_map(char map[][WIDTH]) {
    for (int i = 0; i < HEIGHT; i++) {
        for (int j = 0; j < WIDTH; j++) {
            printf("%c ", map[i][j]);
        }
        printf("\n");
    }
}

void move_player(int *player_position, int direction) {
    int new_position = *player_position + direction;
    if (new_position >= 0 && new_position < WIDTH) {
        *player_position = new_position;
    }
}
